# PDF翻译功能实现计划

## 目标

实现PDF翻译功能，页面与批量文件翻译类似，但专门处理PDF文件。

## 实现步骤

### 1. 后端Python代码修改

#### 1.1 修改 `translator.py`

* 添加PDF文本提取功能（使用pypdf库）

* 添加PDF生成功能（使用reportlab库）

* 添加 `extract_pdf_text()` 方法：从PDF文件提取文本

* 添加 `create_pdf_from_text()` 方法：从文本生成PDF文件

#### 1.2 修改 `translation_api.py`

* 添加新的API端点 `/batch-translate-pdf`

* 处理PDF文件列表

* 对每个PDF文件：

  * 提取文本内容

  * 调用翻译API翻译文本

  * 生成翻译后的PDF文件

* 支持替换原文件或另存为新文件

### 2. Rust后端代码修改

#### 2.1 修改 `lib.rs`

* 添加 `scan_folder_pdf_files` 命令：扫描文件夹中的PDF文件

* 类似于现有的 `scan_folder_txt_files` 命令

### 3. 前端Vue组件修改

#### 3.1 修改 `App.vue`

* 在侧边栏添加新的标签页："PDF翻译"

* 导入新的 `BatchPDFTranslation` 组件

#### 3.2 创建新组件 `BatchPDFTranslation.vue`

* 复制 `BatchFileTranslation.vue` 的结构和样式

* 修改文件选择过滤器，只接受 `.pdf` 文件

* 修改文件扫描功能，扫描PDF文件

* 调用新的PDF翻译API端点

* 保持与批量文件翻译相同的UI和交互体验

### 4. 依赖库

* `pypdf>=4.0.0` - 用于提取PDF文本

* `reportlab>=4.0.0` - 用于生成PDF文件

## 技术要点

* 使用内嵌式Python环境（resources/python/）

* PDF文本提取后进行翻译，然后生成新的PDF

* 保持与现有批量文件翻译相同的用户体验

* 支持本地模型和云端API两种翻译引擎

